"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.Pointer=exports.createPointer=void 0;let r=require("../interface/calendar"),e=require("../interface/component"),t=e=>Object.assign({x:0,y:0,show:!1,animate:!0,transition:!0},e),i=(exports.createPointer=t,(e,t)=>{let{month:n,day:a}=t;t=(0,r.findDateIndex)(e.weeks,e=>e.month==n&&e.day==a);return{ddx:t%7,wdx:Math.floor(t/7),len:e.weeks.length}}),s=(e,t,n)=>{var{ddx:e,wdx:t,len:a}=i(e,t);return{x:n[e]+"px",y:`calc(100% / ${a} * ${t})`}};class n extends e.CalendarHandler{constructor(){super(...arguments),this.show=!0}update(e,t=!1,n,a=!1){var r=this._instance_,i=(n=n||(null==e?void 0:e.checked)||r.data.checked,null!=(i=null==e?void 0:e.current)?i:r.data.current),i=null!=e&&e.panels?e.panels[i]:(null==e?void 0:e[`panels[${i}]`])||r.data.panels[i],{x:t,y:i}=(this._vibrate_=t,s(i,n,r._centres_));null!=e&&e.pointer?e.pointer=Object.assign(Object.assign({},e.pointer),{x:t,y:i,show:this.show,animate:!0}):e?(e["pointer.x"]=t,e["pointer.y"]=i,e["pointer.show"]=this.show,e["pointer.animate"]=!a):r.setData({"pointer.x":t,"pointer.y":i,"pointer.show":this.show,"pointer.animate":!a})}animationEnd(){var e=this._instance_;e.setData({"pointer.animate":!1}),e.data.vibrate&&this._vibrate_&&this.show&&wx.vibrateShort({type:"light"})}}exports.Pointer=n;